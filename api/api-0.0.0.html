<!doctype html>
<html>
 <head>
  <meta charset="utf-8">
  <title>NLP Interchange Format (NIF) 2.0 - Web Service Access Specification</title>
  <meta name="author" content="Sebastian Hellmann">
  <link rel="stylesheet" href="css/main.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
   <script src="js/jquery-1.10.2.min.js"></script> 
    <script> 
    $(function(){
      $("#about").load("http://persistence.uni-leipzig.org/nlp2rdf/specification/about.html"); 
    });
    </script> 
</head>
 <body>
   <ol class="nav lang">
	  <li><a href="/nlp2rdf/">Back to Overview</a></li>
	  <li><a href="/nlp2rdf/specification/api.html">latest draft</a></li> 
     <li></li>
   </ol>
     <ol class="nav">
     <li><a href="/nlp2rdf/specification/api/api-0.0.0.html">v0.0.0</a></li>
   </ol>
   
   <h2>NLP Interchange Format (NIF) 2.0</h2><h1>Public API Specification</h1><h2>Document Version 0.0.0 (not versioned yet)</h2> 
   
<h2>Summary</h2>
<p>The NLP Interchange Format (NIF) is an RDF/OWL-based format that aims to achieve interoperability between Natural Language Processing (NLP) tools, language resources and annotations. NIF consists of specifications, ontologies and software (<a href="http://persistence.uni-leipzig.org/nlp2rdf">overview</a>), which are combined under the version identifier "NIF 2.0", but are <a href="http://persistence.uni-leipzig.org/nlp2rdf/specification/version.html">versioned individually</a>.</p>

<p>This specification defines parameters for NIF service implementations (NIF-SI): Web Service (NIF-WS) and Command Line Interface (NIF-CLI)</p>

<h2>NIF Service Implementation (NIF-SI)</h2>
<p>NIF-SI may be implemented as Web Service (NIF-WS) or UNIX Command Line Interface (NIF-CLI) or both, but to call itself a NIF implementation either a NIF-WS or NIF-CLI implementation MUST exist. </p>
<ul>
<li>A NIF-SI MUST implement common parameters in the next sections.</li>
<li>A NIF-SI MUST implement all parameters specific to NIF-WS or NIF-CLI respectively.</li>
<li>A NIF-SI MUST implement all required values.</li>
<li>A NIF-SI MUST implement the long and the short form.</li>
<li>A NIF-SI MUST give an error message, if no <code>input</code> is given</li>
<li>A NIF-SI MUST implement the specified default values and thus MUST be omittable, when calling the implementation.</li>
<li>A NIF-SI MUST implement the specified default values and thus MUST be omittable, when calling the implementation.</li>
</ul>
<h3>Example 1</h3>
Piping text into NIF-SI of StanfordCoreNLP<br>
<div class="code"><pre>
# -f or --informat specifies the format (text, turtle, rdfxml)
# -t or --intype specifies the input type (direct, file, url) 
echo "My dog also likes eating sausage." | java -jar stanfordNIF-beta.jar -f text -t direct

# -t can be omitted since direct is the default
echo "My dog also likes eating sausage." | java -jar stanfordNIF-beta.jar -f text 
</pre></div>


<h3>Example 2</h3>
<div class="code"><pre>
# -t or --intype specifies the input type (direct, file, url) 
# -i or --input specifies the input
echo "My dog also likes eating sausage." > text.txt
java -jar stanfordNIF-beta.jar -f text -i text.txt -t file
</pre></div>


<h2>Common Parameters (normative)</h2>	
	<table border=1 >
			<tr>
				<th>Parameter</th>
				<th>Description</th>
			</tr>   
			<tr>
				<td class="c">
					<strong><code>input</code></strong><br><br>
					OR<br><br>
					<strong><code>i</code></strong><br>
				<td>
					<h3 id="input"><strong>Input</strong><br/>
						no default, this is the serialized data (i.e. the text or the NIF RDF)
					</h3>
					Since this parameter is the data which has to be processed by the tool, we require additional parameters to specify the data.
					<b>Input Type</b> (see below) specifies how the data is retrieved (e.g. direct or via file). 
					<b>Input Format</b> (see below) specifies in what format the retrieved data is (e.g. text or turtle or rdfxml). 
				</td>
			</tr>                     
			<tr>
				<td class="c">
					<strong><code>informat</code></strong><br><br>
					OR<br><br>
					<strong><code>f</code></strong><br>
				</td>
				<td>
					<h3 id="informat"><b>Input Format</b><br/>
						NIF-WS default: <code>turtle</code><br/>
						NIF-CLI default: <code>turtle</code>
					</h3>
					<ul><li>Determines in which format the <b>input</b> is given.</li>
					<li>NIF-SI must accept values <code>text</code>, <code>turtle</code>, <code>rdfxml</code>. </li>
					<li>NIF-WS MUST honor the "Content-Type: " HTTP Request Header as specified in the next section.</li>
					<li>NIF-SI may additionally accept <code>ntriples</code>, <code>json</code>, <code>json-ld</code> <code>html</code>, <code>pdf</code> and otherrs.</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="c">
					<strong><code>intype</code></strong><br><br>
					OR<br><br>
					<strong><code>t</code></strong><br>
				</td>
				<td>
					<h3 id="intype"><strong>Input Type</strong><br/>
						NIF-WS default: <code>direct</code><br/>
						NIF-CLI default: <code>direct</code>
					</h3>
					Determines how the <b>input</b> is accessed or retrieved. Values are:
					<ul>
						<li><code>direct</code> - input is read from stdin or HTTP parameter (GET) or body (POST).</li>
						<li><code>url</code> - NIF-SI retrieves the input from the URL. </li>
						<li><code>file</code> - input is read from a local file (relative or absolute path) .</li>
					</ul> 
					NIF-WS MUST accept values <code>direct</code> and <code>url</code>.<br>
					NIF-CLI MUST accept values <code>direct</code>, <code>url</code> and <code>file</code>.<br><br>
					
					<strong>Note:</strong> NIF-CLI is expected to work on UNIX-like systems, e.g. <code>cat textfile.txt | java -jar nif-cli.jar --informat text </code>
				</td>
			</tr>
			
			<tr>
				<td class="c">
					<strong><code>outformat</code></strong><br><br>
					OR<br><br>
					<strong><code>o</code></strong><br>
				</td>
				<td>
					<h3 id="outformat"><strong>Output Format</strong><br/>
						NIF-WS default: <code>turtle</code><br/>
						NIF-CLI default: <code>turtle</code>
					</h3>
					Determines the format of the output.<br>
					NIF-SI MUST accept values <code>text</code>, <code>turtle</code>, <code>rdfxml</code>. </br>
					NIF-WS MUST honor the "Accept: " HTTP Request Header as specified in the next section.
				</td>
			</tr>
			<tr>
				<td class="c">
					<strong><code>urischeme</code></strong><br><br>
					OR<br><br>
					<strong><code>u</code></strong><br>
				</td>
				<td>
					<h3 id="urischeme">URI Scheme<br/>
						NIF-WS default: <code>RFC5147String</code><br/>
						NIF-CLI default: <code>RFC5147String</code>
					</h3>
					Determines the urischeme to be used.  <br>
					NIF-SI MUST accept:<br>
					<ul>
						<li>RFC5147String OR http://persistence.uni-leipzig.org/nlp2rdf/ontologies/nif-core#RFC5147String</li>
						<li>CStringInst OR http://persistence.uni-leipzig.org/nlp2rdf/ontologies/nif-core#CStringInst</li>
					</ul> 
					NIF-SI MAY accept:<br>
					<ul>
						<li>ContextHashBasedString OR http://persistence.uni-leipzig.org/nlp2rdf/ontologies/nif-core#ContextHashBasedString</li>
						<li>OffsetBasedString OR http://persistence.uni-leipzig.org/nlp2rdf/ontologies/nif-core#OffsetBasedString</li>
					</ul> 
					
					NIF-SI MAY implement additional urischemes (e.g. their own). If they do so they MUST only accept the full URI<br>
				
					
				</td>
			</tr>
			<tr>
				<td class="c">
				   	<strong><code>prefix</code></strong><br><br>
					OR<br><br>
					<strong><code>p</code></strong><br>
				</td>
				<td>
					   <h3 id="prefix">Prefix<br/>
						NIF-WS default: special<br/>
						NIF-CLI default: special</code>
					   </h3>
						
					   A prefix, which is used to create URIs. 
					   <ol>
					   <li>The NIF-SI MUST create any new URIs using this <code>prefix</code>.</li>
					   <li>If the prefix is given the NIF-SI MUST use it to mint new URIs as-is, without any modification.</li>
					   <li>The NIF-SI MUST concatenate the prefix with the identifier produced based on the <code>urischeme</code> parameter.</li>
					   <li>If the parameter is missing it MUST be substituted by a sensible default (e.g. the web service URI or a hash over the text or a UUID).</li>
					   </ol>
					   <h3>Examples</h3>
					   <code>input</code> is "My dog likes eating sausage.";
					   <ul>
						<li><a href="http://nlp2rdf.lod2.eu/nif-ws.php?input=My%20dog%20likes%20eating%20sausage.&amp;informat=text&amp;prefix=http://example.org%23" title="http://nlp2rdf.lod2.eu/nif-ws.php?input=My%20dog%20likes%20eating%20sausage.&amp;informat=text&amp;prefix=http://example.org%23" target="_blank" >prefix=http://example.org%23</a></li>
					   </ul>
						<div class="code"><code>
						&lt;http://example.org#char=0,28> <br>
							  &emsp; rdf:type nif:RFC5147String ,
                                        nif:Context ;<br>
                              &emsp; nif:beginIndex "0" ;<br>
                              &emsp; nif:endIndex "28" ;<br>
                              &emsp; nif:isString "My dog likes eating sausage." .<br>
						</code></div>
						<ul>
						<li><a href="http://nlp2rdf.lod2.eu/nif-ws.php?input=My%20dog%20likes%20eating%20sausage.&amp;informat=text&amp;prefix=http://example.org/whatever/" title="http://nlp2rdf.lod2.eu/nif-ws.php?input=My%20dog%20likes%20eating%20sausage.&amp;informat=text&amp;prefix=http://example.org/whatever/" target="_blank" >prefix=http://example.org/whatever/</a></li>
					   </ul>
						<div class="code"><code>
						&lt;http://example.org/whatever/char=0,28> <br>
										 &emsp; rdf:type nif:RFC5147String ,
                                                 nif:Context ;<br>
                                         &emsp; nif:beginIndex "0" ;<br>
                                         &emsp; nif:endIndex "28" ;<br>
                                         &emsp; nif:isString "My dog likes eating sausage." .<br>
						
						</code></div>
						<ul>
						<li><a href="http://nlp2rdf.lod2.eu/nif-ws.php?input=My%20dog%20likes%20eating%20sausage.&amp;informat=text&amp;prefix=http://example.org/nif%3F" title="http://nlp2rdf.lod2.eu/nif-ws.php?input=My%20dog%20likes%20eating%20sausage.&amp;informat=text&amp;prefix=http://example.org/nif%3F" target="_blank" >prefix=http://example.org/nif%3F</a></li>
					   </ul>
						<div class="code"><code>
						&lt;http://example.org/nif?char=0,28> <br>
										 &emsp; rdf:type nif:RFC5147String ,
                                                 nif:Context ;<br>
                                         &emsp; nif:beginIndex "0" ;<br>
                                         &emsp; nif:endIndex "28" ;<br>
                                         &emsp; nif:isString "My dog likes eating sausage." .<br>
						
						</code></div>
					   
				</td>
			</tr>
			<tr>
				<td class="c">
				   	<strong><code>config</code></strong><br><br>
					OR<br><br>
					<strong><code>c</code></strong><br>
				</td>
				<td>
				   <h3 id="config">Config<br/>
						NIF-WS default: n/a<br/>
						NIF-CLI default: n/a</code>
					   </h3>
					A string which can be used to configure the NIF-SI.
					<ul>
					 <li>No required values are specified for this parameter.</li>
					 <li>What exactly the NIF-SI requires is left underspecified for now. Can be anything.</li>
					 <li>If the NIF-SI requires configuration, it MUST use this parameter.</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="c">
				   	<strong><code>configfile</code></strong><br><br>
					OR<br><br>
					<strong><code>cf</code></strong><br>
				</td>
				<td>
				   <h3 id="configfile">Config File<br/>
						NIF-WS default: n/a<br/>
						NIF-CLI default: n/a<br>
					   </h3>
					A file which can be used to configure the NIF-SI.
					<ul>
					 <li>No required values are specified for this parameter.</li>
					 <li>Same as <code>config</code>, but it is loaded from file.</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="c">
				   	<strong><code>port</code></strong><br><br>
					(no short form)<br><br>
				</td>
				<td>
				   <h3 id="port">port<br/>
						NIF-WS default: <code>8896</code><br/>
						NIF-CLI default: <code>8896</code><br>
					   </h3>
					If implemented this parameter gives the port number of the web service. 
					This parameter is used to start a NIF-WS implementations.
				</td>
			</tr>
			
			</table>
			<h2>HTTP Request and Response header</h2>	
			<h3>Accept and Content-Type</h3>
			NIF-WS implementations MUST accept HTTP Request Headers as substitute for <code>informat</code> and <code>outformat</code>.
			NIF-WS implementations MUST set the appropriate <code>Content-Type: </code> Header.<br>
			
			The following mapping applies for the Accept Request Header:
			<ul>
				<li><code>outformat=text</code> is the same as <code>Accept: text/plain</code></li>
				<li><code>outformat=turtle</code> is the same as <code>Accept: text/plain</code></li>
				<li><code>outformat=rdfxml</code> is the same as <code>Accept: application/rdf+xml</code></li>
			</ul> 
			and for the Content-Type Request Header: 
			<ul>
				<li><code>informat=text</code> is the same as <code>Content-Type: text/plain</code></li>
				<li><code>informat=turtle</code> is the same as <code>Content-Type: text/plain</code></li>
				<li><code>informat=rdfxml</code> is the same as <code>Content-Type: application/rdf+xml</code></li>
			</ul> 
			
			
			<h2>Additional parameters (informative)</h2>
			
			<table border="1" >
			<tr>
				<td class="c">
					<strong><code>logprefix</code></strong><br><br>
					OR<br><br>
					<strong><code>lp</code></strong><br>
				</td>
				<td> <h3 id="logprefix">Log Prefix<br/>
						NIF-WS default: special<br/>
						NIF-CLI default: special
					   </h3>
					TODO this parameter is still informative. No implementation necessary. 
					Used to create prefix for log URIs in the same way as <code>prefix</code>. please use a sensible default. 
				
				</td>
			</tr>
			<tr>
				<td class="c">
					<strong><code>profile</code></strong><br><br>
					OR<br><br>
					<strong><code>pf</code></strong><br>
				</td>
				<td> <h3 id="profile">Profile<br/>
						NIF-WS default: <code>simple</code><br/>
						NIF-CLI default: <code>simple</code>
					   </h3>
					TODO this parameter is still informative. No implementation necessary. 
					It is used to swtich between different complexity profiles.
					NIF-SI MAY accept values <code>simple</code>, <code>stanbol</code>, <code>oa</code>. </br>
				
				</td>
			</tr>
			<tr>
				<td class="c">
				   	<strong><code>uspara</code></strong><br><br>
					OR<br><br>
					<strong><code>up</code></strong><br>
				</td>
				<td><h3 id="uspara">URI Scheme Parameters<br/>
						NIF-WS default: n/a<br/>
						NIF-CLI default: n/a</code>
					   </h3>
					TODO this parameter is still informative. No implementation necessary. 
					Some parameters for certain urischemes, e.g. contextlength
				</td>
			</tr>
			<tr>
				<td class="c">
				   	<strong><code>help</code></strong><br><br>
					OR<br><br>
					<strong><code>h</code></strong><br>
				</td>
				<td>
				   <h3 id="help">Help<br/>
						NIF-WS default: false<br/>
						NIF-CLI default: false</code>
					   </h3>
					TODO this parameter is still informative. No implementation necessary. 
					If this parameter is "true", then some help is displayed. 
				</td>
			</tr>
			<tr>
				<td class="c">
				   	<strong><code>outfile</code></strong><br><br>
					OR<br><br>
					<strong><code>of</code></strong><br>
				</td>
				<td>
				   <h3 id="outfile">Output File<br/>
						NIF-WS default: n/a<br/>
						NIF-CLI default: n/a<br>
					   </h3>
					A file into which results of NIF-CLI should be written.
					Note: this option is for operating systems that do not use pipes. 
				</td>
			</tr>
	</table>
	


<h2>RLOG - an RDF Logging Ontology (informative)</h2>
For NIF we have created our own Logging Ontology - RLOG. It is available at <a href="http://persistence.uni-leipzig.org/nlp2rdf/ontologies/rlog#">http://persistence.uni-leipzig.org/nlp2rdf/ontologies/rlog#</a>. The ontology is very simple, but it covers the NIF use case very well. As of now, we have not discovered any missing features. RLOG can be combined with the <a href="http://www.w3.org/TR/prov-o/"> W3C Provenance Ontology</a>. The logging has to follow this pattern: 
<div class="code"><code>@prefix rlog: &lt;http://persistence.uni-leipzig.org/nlp2rdf/ontologies/rlog#&gt; .<br>
@prefix logprefix: &lt;http://example.org/user-defined-logPrefix#&gt; .<br>
logprefix:user-defined-urn<br>
	 &emsp; a rlog:Entry ;<br>
	 &emsp; rlog:level rlog:ERROR ;<br>
	 &emsp; rlog:date "2013-06-08T17:00:00Z"^^xsd:datetime ;<br>
	 &emsp; rlog:message "Log message" ;<br>
	 &emsp; # optional:<br>
	 &emsp; rlog:resource  &lt;http://example.com/RDF-resource&gt; . </code></div> 
	
Here is an example produced by the <a href="https://github.com/NLP2RDF/software#nif-validator" >NIF validator</a>:
<div class="code"><code># default prefix, non dereferencable<br>
@prefix logprefix: &lt;http://nlp2rdf.lod2.eu/instance/log/&gt; .<br>
# arbitrary id at the moment. <br>
logprefix:id_ERROR_0_1377165120346<br>
        &emsp; a              rlog:Entry ;<br>
        &emsp; rlog:date      "2013-08-22T09:52:00.347Z"^^xsd:dateTime ;<br>
        &emsp; rlog:level     rlog:ERROR ;<br>
        &emsp; rlog:message   """http://example.com/error4.txt#char=1,25: for the context, the length of nif:isString (27) must equal nif:endIndex (25)""" ;<br>
        &emsp; rlog:resource  &lt;http://example.com/error4.txt#char=1,25&gt; .</code></div>


<div id="about"></div>


 </body>
</html>

